<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LevelUp Studio</title>

  <!-- SEO Meta -->

  <meta name="description" content="LevelUp Studio - Track your skills, build your resume, and achieve your goals.">

  <!-- Google Fonts -->

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600&family=Roboto:wght@400;500&display=swap"
    rel="stylesheet"
  />

  <style>
    /* ============ LevelUp Studio ‚Äî Styles ============ */

    /* CSS Variables */
    :root {
      --surface: #ffffff;
      --surface-2: #f6f8fb;
      --surface-3: #eef2f7;

      --text: #0f172a;       /* slate-900 */
      --muted: #64748b;      /* slate-500 */
      --border: #e2e8f0;     /* slate-200 */

      --brand: #7c3aed;      /* violet-600 */
      --brand-600: #6d28d9;  /* violet-700 */
      --brand-100: #ede9fe;  /* violet-100 */

      --accent: #22c55e;     /* green-500 */
      --accent-100: #ecfdf5; /* green-50 */

      --warn: #f59e0b;       /* amber-500 */
      --danger: #ef4444;     /* red-500 */

      --shadow-1: 0 1px 2px rgba(16, 24, 40, 0.06), 0 1px 1px rgba(16, 24, 40, 0.04);
      --shadow-2: 0 6px 20px rgba(16, 24, 40, 0.08);
    }

    /* Resets */
    *,
    *::before,
    *::after {
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
    }

    body {
      margin: 0;
      background: var(--surface-2);
      color: var(--text);
      font-family: "Roboto", system-ui, -apple-system, Segoe UI, Arial, sans-serif;
      line-height: 1.6;
    }

    img, svg {
      display: block;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    ul, ol {
      margin: 0;
      padding: 0;
      list-style: none;
    }

    button {
      font: inherit;
      border: none;
      background: none;
      color: inherit;
      cursor: pointer;
    }

    /* Typography */
    h1, h2, h3, h4, h5 {
      font-family: "Poppins", system-ui, -apple-system, Segoe UI, Arial, sans-serif;
      margin: 0 0 10px;
    }

    p {
      margin: 0 0 10px;
    }

    /* Utilities */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 24px;
    }

    .icon {
      width: 22px;
      height: 22px;
      stroke: currentColor;
    }

    /* Header */
    .site-header {
      position: sticky;
      top: 0;
      z-index: 50;
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      box-shadow: var(--shadow-1);
      display: flex;
      align-items: center;
      gap: 20px;
      padding: 12px 20px;
    }

    .logo {
      color: var(--brand);
      font-weight: 600;
      letter-spacing: 0.2px;
    }

    .main-nav {
      display: flex;
      align-items: center;
      gap: 10px;
      flex: 1;
    }

    .main-nav a {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      color: var(--muted);
      padding: 8px 10px;
      border-radius: 10px;
      transition: color 0.15s ease, background 0.15s ease;
    }

    .main-nav a:hover {
      color: var(--text);
      background: var(--surface-3);
    }

    .header-actions {
      display: flex;
      align-items: center;
      gap: 12px;
      color: var(--muted);
    }

    .header-actions .icon {
      opacity: 0.9;
    }

    /* Layout */
    .layout {
      display: grid;
      grid-template-columns: 240px 1fr;
      gap: 24px;
      max-width: 1200px;
      margin: 20px auto;
      padding: 0 20px 32px;
    }

    /* Sidebar */
    .sidebar {
      position: sticky;
      top: 68px;
      align-self: start;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 16px;
      box-shadow: var(--shadow-1);
    }

    .sidebar ul li + li {
      margin-top: 6px;
    }

    .sidebar a {
      display: block;
      padding: 10px 12px;
      border-radius: 10px;
      color: var(--muted);
      transition: background 0.15s ease, color 0.15s ease;
    }

    .sidebar a:hover {
      background: var(--brand-100);
      color: var(--brand);
    }

    /* Main Content */
    .main-content {
      display: grid;
      grid-template-columns: 1fr;
      gap: 16px;
    }

    .welcome {
      background: linear-gradient(90deg, var(--brand-100), #f1f5ff 60%);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 18px 18px;
      box-shadow: var(--shadow-1);
    }

    .welcome h2 {
      font-weight: 600;
    }

    /* Stats */
    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 16px;
    }

    .stat-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 16px;
      box-shadow: var(--shadow-1);
    }

    .progress-bar {
      height: 12px;
      background: var(--surface-3);
      border: 1px solid var(--border);
      border-radius: 999px;
      overflow: hidden;
      margin-top: 10px;
    }

    .progress-bar .fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, var(--brand), var(--accent));
      transition: width 0.35s ease-in-out;
    }

    /* Resume tips */
    .resume-tips {
      margin-top: 8px;
      color: var(--muted);
    }

    .resume-tips li {
      padding: 6px 0;
    }

    /* Cards */
    .card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 16px;
      box-shadow: var(--shadow-1);
    }

    /* Recent Activity */
    .recent-activity ul li {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px dashed var(--border);
    }

    .recent-activity ul li:last-child {
      border-bottom: 0;
    }

    .timestamp {
      color: var(--muted);
      font-size: 0.9rem;
    }

    /* Quick Actions */
    .quick-actions .actions {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 10px;
      margin-top: 8px;
    }

    .quick-actions button {
      background: var(--brand);
      color: #fff;
      border-radius: 12px;
      padding: 10px 12px;
      box-shadow: var(--shadow-1);
      transition: transform 0.06s ease, background 0.15s ease, box-shadow 0.15s ease;
    }

    .quick-actions button:hover {
      background: var(--brand-600);
      box-shadow: var(--shadow-2);
    }

    .quick-actions button:active {
      transform: translateY(1px);
    }

    /* Skill Tree */
    .skill-tree h3 {
      margin-bottom: 8px;
    }

    .tree-container {
      display: grid;
      place-items: center;
      padding: 14px;
    }

    .tree-vertical {
      display: grid;
      place-items: center;
      row-gap: 10px;
    }

    .tree-row {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      align-items: center;
      column-gap: 10px;
    }

    .node {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-width: 110px;
      padding: 10px 14px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: var(--surface);
      color: var(--text);
      box-shadow: var(--shadow-1);
      transition: box-shadow 0.15s ease, transform 0.06s ease, border-color 0.15s ease, background 0.15s ease;
      user-select: none;
      outline: none;
      cursor: pointer;
    }

    .node:focus-visible {
      box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.25);
    }

    .node:hover {
      transform: translateY(-1px);
      box-shadow: var(--shadow-2);
    }

    .node.locked {
      background: #f8fafc;
      color: var(--muted);
      border-color: var(--border);
    }

    .node.unlocked {
      background: var(--accent-100);
      border-color: var(--accent);
      color: #064e3b;
      font-weight: 600;
    }

    .connector.vertical {
      width: 2px;
      height: 18px;
      background: var(--border);
    }

    .connector.horizontal {
      width: 28px;
      height: 2px;
      background: var(--border);
    }

    /* Skill Cards */
    .skill-cards {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 16px;
    }

    .skill-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 16px;
      box-shadow: var(--shadow-1);
    }

    .skill-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }

    .skill-icon {
      font-size: 24px;
    }

    .skill-level {
      margin-top: 8px;
      font-size: 0.9rem;
      color: var(--muted);
    }

    /* Modal */
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.45);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease, visibility 0.2s ease;
    }

    .modal.show {
      opacity: 1;
      visibility: visible;
    }

    .modal-content {
      position: relative;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      width: min(520px, 96vw);
      padding: 18px 18px 20px;
      box-shadow: var(--shadow-2);
      transform: scale(0.95);
      transition: transform 0.2s ease;
    }

    .modal.show .modal-content {
      transform: scale(1);
    }

    .modal-content h4 {
      margin-bottom: 6px;
    }

    #modal-quiz {
      margin-top: 10px;
    }

    #modal-answer {
      width: 100%;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: var(--surface-2);
      outline: none;
      transition: box-shadow 0.15s ease, border-color 0.15s ease;
    }

    #modal-answer:focus {
      border-color: var(--brand);
      box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.2);
    }

    #modal-submit {
      margin-top: 10px;
      background: var(--brand);
      color: #fff;
      padding: 10px 12px;
      border-radius: 12px;
    }

    #modal-feedback {
      margin-top: 8px;
      min-height: 20px;
      color: var(--muted);
    }

    .modal-close {
      position: absolute;
      top: 10px;
      right: 12px;
      font-size: 22px;
      line-height: 1;
      color: var(--muted);
      cursor: pointer;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
      transition: background 0.15s ease;
    }

    .modal-close:hover {
      background: var(--surface-3);
    }

    /* Footer */
    .site-footer {
      max-width: 1200px;
      margin: 10px auto 40px;
      padding: 0 20px;
      color: var(--muted);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .site-footer a {
      color: var(--brand);
    }

    /* Toast Notifications */
    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 12px 16px;
      box-shadow: var(--shadow-2);
      max-width: 320px;
      transform: translateX(100%);
      transition: transform 0.3s ease;
      z-index: 100;
    }

    .toast.show {
      transform: translateX(0);
    }

    .toast.success {
      border-color: var(--accent);
      background: var(--accent-100);
    }

    .toast.error {
      border-color: var(--danger);
      background: #fef2f2;
    }

    /* Responsive */
    @media (max-width: 980px) {
      .layout {
        grid-template-columns: 1fr;
      }
      .sidebar {
        position: static;
        order: 2;
      }
      .stats {
        grid-template-columns: 1fr;
      }
      .main-nav {
        display: none;
      }
    }

    @media (max-width: 640px) {
      .site-header {
        padding: 12px 16px;
      }
      .layout {
        margin: 16px auto;
        padding: 0 16px 24px;
      }
      .quick-actions .actions {
        grid-template-columns: 1fr;
      }
    }
  </style>

</head>
<body>

  <!-- Header -->

  <header class="site-header">
    <h1 class="logo">LevelUp Studio</h1>
    <nav class="main-nav">
      <a href="#"><svg class="icon" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
        viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="M3 12h18M3 6h18M3 18h18"/>
      </svg> Dashboard</a>

  <a href="#"><svg class="icon" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
    viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round"
      d="M5 3h14a2 2 0 012 2v4H3V5a2 2 0 012-2z"/>
    <path stroke-linecap="round" stroke-linejoin="round"
      d="M3 11h18v10a2 2 0 01-2 2H5a2 2 0 01-2-2V11z"/>
  </svg> Resume Builder</a>

  <a href="#"><svg class="icon" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
    viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round"
      d="M11 17h2M12 12h.01M16.293 9.707a1 1 0 00-1.414-1.414L9.586 13.586a2 2
         0 102.828 2.828L16.293 9.707z"/>
  </svg> Skills</a>

  <a href="#"><svg class="icon" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
    viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round"
      d="M16 17l-4-4-4 4"/><path stroke-linecap="round"
      stroke-linejoin="round" d="M12 3v14"/>
  </svg> Goals</a>
</nav>

<div class="header-actions">
  <!-- Search -->
  <svg class="icon" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
    viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
    <circle cx="11" cy="11" r="8"/><path stroke-linecap="round"
      stroke-linejoin="round" d="M21 21l-4.35-4.35"/>
  </svg>
  <!-- Profile -->
  <svg class="icon" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
    viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round"
      d="M5.121 17.804A3.16 3.16 0 016 .5 4.87 4.87 0
         117 2.414M4.34 10.195A23.22 23.22 0
         0112 12.776a23.22 23.22 0 017.66-2.58"/>
  </svg>
</div>

  </header>

  <!-- Layout -->

  <div class="layout">
    <!-- Sidebar -->
    <aside class="sidebar">
      <ul>
        <li><a href="#">Goals</a></li>
        <li><a href="#">Resumes</a></li>
        <li><a href="#">Modules</a></li>
        <li><a href="#">Analytics</a></li>
      </ul>
    </aside>

<!-- Main Content -->
<main class="main-content">
  <section class="welcome">
    <h2>Hey Chaquille, ready to level up?</h2>
    <p>You've unlocked <span id="unlocked-count">0</span> skills so far. Keep going!</p>
  </section>

  <!-- Progress & Resume Status -->
  <section class="stats">
    <div class="stat-card">
      <h3>Skill Progress</h3>
      <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
        <div class="fill" style="width: 0%;"></div>
      </div>
      <p class="skill-level"><span id="progress-text">0% Complete</span></p>
    </div>
    <div class="stat-card">
      <h3>Resume Strength</h3>
      <ul class="resume-tips">
        <li>‚≠ê Add more quantifiable achievements</li>
        <li>üîç Increase keyword density</li>
        <li>üìå Improve formatting consistency</li>
      </ul>
    </div>
  </section>

  <!-- Recent Activity -->
  <section class="recent-activity card">
    <h3>Recent Activity</h3>
    <ul>
      <li>Welcome to LevelUp Studio! <span class="timestamp">now</span></li>
    </ul>
  </section>

  <!-- Quick Actions -->
  <section class="quick-actions card">
    <h3>Quick Actions</h3>
    <div class="actions">
      <button data-action="skills">‚úèÔ∏è Edit Skills</button>
      <button data-action="profile">üîÑ Update Profile</button>
      <button data-action="export">üì§ Export PDF</button>
      <button data-action="check">üß™ Run Resume Check</button>
    </div>
  </section>

  <!-- Skill Tree -->
  <section class="skill-tree card">
    <h3>Your Skill Tree</h3>
    <div class="tree-container">
      <div class="tree-vertical">
        <div class="node" data-skill="HTML">HTML</div>
        <div class="connector vertical"></div>
        <div class="tree-row">
          <div class="node" data-skill="CSS">CSS</div>
          <div class="connector horizontal"></div>
          <div class="node" data-skill="JavaScript">JavaScript</div>
        </div>
        <div class="connector vertical"></div>
        <div class="node" data-skill="React">React</div>
        <div class="connector vertical"></div>
        <div class="tree-row">
          <div class="node" data-skill="Node.js">Node.js</div>
          <div class="connector horizontal"></div>
          <div class="node" data-skill="MongoDB">MongoDB</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Skill Cards -->
  <section class="skill-cards card">
    <h3>Featured Skills</h3>
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 16px; margin-top: 12px;">
      
      <div class="skill-card">
        <div class="skill-header">
          <span class="skill-icon" aria-hidden="true">üíª</span>
          <h4>JavaScript</h4>
        </div>
        <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
          <div class="fill" style="width: 0%;"></div>
        </div>
        <p class="skill-level">Locked</p>
      </div>

      <div class="skill-card">
        <div class="skill-header">
          <span class="skill-icon" aria-hidden="true">üé®</span>
          <h4>CSS</h4>
        </div>
        <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
          <div class="fill" style="width: 0%;"></div>
        </div>
        <p class="skill-level">Locked</p>
      </div>

      <div class="skill-card">
        <div class="skill-header">
          <span class="skill-icon" aria-hidden="true">üåê</span>
          <h4>HTML</h4>
        </div>
        <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">
          <div class="fill" style="width: 100%;"></div>
        </div>
        <p class="skill-level">Unlocked</p>
      </div>

    </div>
  </section>
</main>

  </div>

  <!-- Modal -->

  <div class="modal" id="skill-modal">
    <div class="modal-content">
      <div class="modal-close">&times;</div>
      <h4 id="modal-skill-title">Skill Challenge</h4>
      <p id="modal-skill-desc">Complete the challenge to unlock this skill.</p>
      <div id="modal-quiz">
        <p id="modal-question">Answer the question below:</p>
        <input type="text" id="modal-answer" placeholder="Type your answer here...">
        <button id="modal-submit">Submit Answer</button>
        <div id="modal-feedback"></div>
      </div>
    </div>
  </div>

  <!-- Toast Container -->

  <div id="toast-container"></div>

  <!-- Footer -->

  <footer class="site-footer">
    <p>Built with ‚ù§Ô∏è for learners everywhere</p>
  </footer>

  <script>
    /* ============ LevelUp Studio ‚Äî Enhanced Script ============ */

    document.addEventListener("DOMContentLoaded", () => {
      // Elements
      const progressFill = document.querySelector(".progress-bar .fill");
      const progressText = document.getElementById("progress-text");
      const unlockedCount = document.getElementById("unlocked-count");
      const activityList = document.querySelector(".recent-activity ul");
      const nodes = Array.from(document.querySelectorAll(".skill-tree .node"));
      const modal = document.getElementById("skill-modal");
      const modalClose = document.querySelector(".modal-close");
      const modalTitle = document.getElementById("modal-skill-title");
      const modalDesc = document.getElementById("modal-skill-desc");
      const modalQuestion = document.getElementById("modal-question");
      const modalAnswer = document.getElementById("modal-answer");
      const modalSubmit = document.getElementById("modal-submit");
      const modalFeedback = document.getElementById("modal-feedback");

      // Enhanced skill config with more skills
      const skillConfig = {
        HTML: {
          unlockedByDefault: true,
          prereq: [],
          question: "Which HTML tag is used to create a hyperlink? (answer with the tag name only)",
          answer: ["a"],
          description: "Learn the fundamentals of HTML markup"
        },
        CSS: {
          prereq: ["HTML"],
          question: "Which CSS property changes the text color?",
          answer: ["color"],
          description: "Style your HTML with CSS"
        },
        JavaScript: {
          prereq: ["CSS"],
          question: "Which keyword declares a constant in JavaScript?",
          answer: ["const"],
          description: "Add interactivity with JavaScript"
        },
        React: {
          prereq: ["JavaScript"],
          question: "Name the React hook used to manage state in function components.",
          answer: ["usestate", "use state"],
          description: "Build modern UIs with React"
        },
        "Node.js": {
          prereq: ["JavaScript"],
          question: "What command is used to initialize a new Node.js project?",
          answer: ["npm init"],
          description: "Server-side JavaScript development"
        },
        MongoDB: {
          prereq: ["Node.js"],
          question: "What does NoSQL stand for?",
          answer: ["not only sql", "not only structured query language"],
          description: "Document-based database system"
        }
      };

      // Enhanced localStorage with error handling
      const STORAGE_KEY = "lu_skills_unlocked_v2";
      const loadUnlocked = () => {
        try {
          const raw = localStorage.getItem(STORAGE_KEY);
          return raw ? JSON.parse(raw) : [];
        } catch (e) {
          console.warn("Failed to load progress:", e);
          return [];
        }
      };

      const saveUnlocked = (arr) => {
        try {
          localStorage.setItem(STORAGE_KEY, JSON.stringify(arr));
        } catch (e) {
          console.warn("Failed to save progress:", e);
          showToast("Failed to save progress", "error");
        }
      };

      let unlockedSkills = loadUnlocked();

      // Initialize default unlocked skills
      Object.keys(skillConfig).forEach((skill) => {
        if (skillConfig[skill].unlockedByDefault && !unlockedSkills.includes(skill)) {
          unlockedSkills.push(skill);
        }
      });

      let activeSkill = null;

      // Toast notification system
      function showToast(message, type = "info") {
        const toast = document.createElement("div");
        toast.className = `toast ${type}`;
        toast.textContent = message;
        
        document.body.appendChild(toast);
        
        // Trigger animation
        requestAnimationFrame(() => {
          toast.classList.add("show");
        });
        
        // Remove after 3 seconds
        setTimeout(() => {
          toast.classList.remove("show");
          setTimeout(() => {
            document.body.removeChild(toast);
          }, 300); // Wait for the transition to finish
        }, 3000);
      }

      // Update the UI based on unlocked skills
      const updateUI = () => {
        // Update nodes and cards
        nodes.forEach(node => {
          const skillName = node.dataset.skill;
          const card = document.querySelector(`.skill-card h4[data-skill-name="${skillName}"]`)?.closest('.skill-card');
          if (unlockedSkills.includes(skillName)) {
            node.classList.add('unlocked');
            node.classList.remove('locked');
            if (card) {
              card.querySelector('.fill').style.width = '100%';
              card.querySelector('.skill-level').textContent = 'Unlocked';
            }
          } else {
            node.classList.add('locked');
            node.classList.remove('unlocked');
            if (card) {
              card.querySelector('.fill').style.width = '0%';
              card.querySelector('.skill-level').textContent = 'Locked';
            }
          }
        });

        // Update progress count
        const totalSkills = Object.keys(skillConfig).length;
        const unlockedCountNum = unlockedSkills.length;
        unlockedCount.textContent = unlockedCountNum;
        
        const percentage = Math.round((unlockedCountNum / totalSkills) * 100);
        progressFill.style.width = `${percentage}%`;
        progressText.textContent = `${percentage}% Complete`;

        // Update aria attributes
        const progressBar = document.querySelector(".progress-bar");
        if (progressBar) {
          progressBar.setAttribute('aria-valuenow', percentage);
        }
      };

      // Handle node clicks on the skill tree
      document.querySelector(".skill-tree").addEventListener("click", (e) => {
        const node = e.target.closest(".node");
        if (!node) return;

        const skillName = node.dataset.skill;
        if (unlockedSkills.includes(skillName)) {
          showToast(`You have already unlocked ${skillName}!`, "info");
          return;
        }

        const prereqMet = skillConfig[skillName].prereq.every(prereq => unlockedSkills.includes(prereq));
        if (!prereqMet) {
          showToast(`You must unlock ${skillConfig[skillName].prereq.join(" and ")} first.`, "error");
          return;
        }

        activeSkill = skillName;
        modalTitle.textContent = activeSkill;
        modalDesc.textContent = skillConfig[activeSkill].description;
        modalQuestion.textContent = skillConfig[activeSkill].question;
        modalAnswer.value = '';
        modalFeedback.textContent = '';
        modal.classList.add("show");
        modalAnswer.focus();
      });

      // Handle modal form submission
      modalSubmit.addEventListener("click", () => {
        const userAnswer = modalAnswer.value.trim().toLowerCase();
        const correctAnswers = skillConfig[activeSkill].answer.map(a => a.toLowerCase());

        if (correctAnswers.includes(userAnswer)) {
          unlockedSkills.push(activeSkill);
          saveUnlocked(unlockedSkills);
          updateUI();
          showToast(`Congratulations! You unlocked ${activeSkill}!`, "success");
          
          // Add new activity log entry
          const newActivity = document.createElement("li");
          const timestamp = new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
          newActivity.innerHTML = `Unlocked ${activeSkill} <span class="timestamp">at ${timestamp}</span>`;
          activityList.prepend(newActivity);

          modal.classList.remove("show");
        } else {
          modalFeedback.textContent = "Incorrect. Please try again.";
          modalFeedback.style.color = "var(--danger)";
        }
      });
      
      // Allow enter key to submit answer
      modalAnswer.addEventListener('keydown', (e) => {
          if (e.key === 'Enter') {
              e.preventDefault();
              modalSubmit.click();
          }
      });

      // Close modal
      modalClose.addEventListener("click", () => {
        modal.classList.remove("show");
      });

      modal.addEventListener("click", (e) => {
        if (e.target === modal) {
          modal.classList.remove("show");
        }
      });
      
      // Initial UI update
      updateUI();
    });
  </script>

</body>
</html>

